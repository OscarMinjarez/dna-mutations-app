<div class="p-4 shadow-md hover:shadow-lg transition bg-white rounded-md">
    <div class="flex flex-row items-center gap-2 mb-1">
        <i class="fa-solid fa-list"></i>
        <h1 class="font-bold text-lg">Recent DNA Analyses</h1>
    </div>
    <p class="font-light text-sm">Last 10 DNA sequence analyses performed</p>

    <div *ngIf="loading" class="mt-4 text-blue-600">Loading stats...</div>

    <div *ngIf="!loading && sequences.length === 0" class="text-center py-8">
        <div class="text-gray-400 mb-4">
            <i class="fa-solid fa-dna text-3xl"></i>
        </div>
        <p class="text-gray-500">No DNA analyses found</p>
        <p class="text-sm text-gray-400 mt-1">Start by testing some DNA sequences</p>
    </div>

    <div *ngIf="!loading && sequences.length > 0" class="mt-6 overflow-x-auto rounded border border-gray-200">
        <table class="min-w-full table-auto text-sm bg-white">
            <thead class="bg-blue-50 text-blue-700 border-b border-gray-200">
                <tr>
                    <th class="text-left px-4 py-3 font-semibold">Date</th>
                    <th class="text-left px-4 py-3 font-semibold">DNA Sequence</th>
                    <th class="text-left px-4 py-3 font-semibold">Result</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of sequences" class="hover:bg-gray-50 transition border-b border-gray-100">
                    <td class="px-4 py-3 font-mono text-xs text-gray-700 whitespace-nowrap">
                        {{ item.created_at | date: 'medium' }}
                    </td>
                    <td class="px-4 py-3">
                        <div class="font-mono text-xs bg-gray-100 p-2 rounded border border-gray-200 max-w-md overflow-hidden">
                            <div class="truncate" [title]="item.dna.join(' | ')">
                                {{ item.dna.join(' | ') }}
                            </div>
                        </div>
                    </td>
                    <td class="px-4 py-3">
                        <span
                            [ngClass]="{
                                'bg-red-100 text-red-800': item.has_mutation,
                                'bg-green-100 text-green-800': !item.has_mutation
                            }"
                            class="inline-flex items-center gap-1 px-2.5 py-1.5 text-xs font-semibold rounded-full border"
                        >
                            <i
                                [ngClass]="item.has_mutation ? 'fa-solid fa-xmark-circle' : 'fa-solid fa-check-circle'"
                                class="w-3 h-3"
                            ></i>
                            {{ item.has_mutation ? 'Mutation' : 'Normal' }}
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="flex justify-between items-center mt-6 px-4 py-2 bg-gray-50 rounded-b-md text-sm text-gray-600">
            <button
                (click)="loadPage(currentPage - 1)"
                [disabled]="!pagination.prev_page_url"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 cursor-pointer"
            >
                Previous
            </button>

            <span class="text-gray-700">Page {{ currentPage }} of {{ pagination.last_page }}</span>

            <button
                (click)="loadPage(currentPage + 1)"
                [disabled]="!pagination.next_page_url"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 cursor-pointer"
            >
                Next
            </button>
        </div>
    </div>
</div>
